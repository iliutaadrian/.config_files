# Editor: prefer nvim, fallback to vim/vi
if command -v nvim &>/dev/null; then
  export EDITOR='nvim'
elif command -v vim &>/dev/null; then
  export EDITOR='vim'
else
  export EDITOR='vi'
fi
export SUDO_EDITOR="$EDITOR"

export STARSHIP_CONFIG="$HOME/config/starship.toml"

# PATH (cross-platform)
export PATH="$HOME/.local/bin:$PATH"
export PATH="$HOME/.cargo/bin:$PATH"

# macOS only
if [[ "$OSTYPE" == "darwin"* ]]; then
  export PATH="/usr/local/opt/openssl@1.1/bin:$PATH"
  export PATH="/usr/local/opt/postgresql@12/bin:$PATH"
  export PATH="$HOME/Library/Python/3.12/bin:$PATH"
  export PATH="$HOME/.opencode/bin:$PATH"
  export PATH="$HOME/.antigravity/antigravity/bin:$PATH"

  export LDFLAGS="-L/usr/local/opt/openssl@1.1/lib"
  export CPPFLAGS="-I/usr/local/opt/openssl@1.1/include"
  export PKG_CONFIG_PATH="/usr/local/opt/openssl@1.1/lib/pkgconfig"

  export PGGSSENCMODE="disable"
  export OBJC_DISABLE_INITIALIZE_FORK_SAFETY=YES
  export PYENV_ROOT="$HOME/.pyenv"
fi

# bat
command -v bat &>/dev/null && export BAT_THEME=ansi

# FZF
if command -v fzf &>/dev/null; then
  if command -v bat &>/dev/null; then
    export FZF_DEFAULT_OPTS="--preview 'bat --color=always {}' --height 40%"
  else
    export FZF_DEFAULT_OPTS="--height 40%"
  fi
  export FZF_COMPLETION_OPTS='--border --info=inline'
fi
