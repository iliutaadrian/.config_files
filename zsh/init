# Nix
if [ -e '/nix/var/nix/profiles/default/etc/profile.d/nix-daemon.sh' ]; then
  . '/nix/var/nix/profiles/default/etc/profile.d/nix-daemon.sh'
fi

# Completions
autoload -Uz compinit

zstyle ':completion:*' matcher-list 'm:{a-z}={A-Z}'     # case-insensitive
zstyle ':completion:*' list-colors "${(s.:.)LS_COLORS}"  # colored output
zstyle ':completion:*' menu select                        # TAB cycles, Shift+TAB reverses
zstyle ':completion:*' special-dirs false                 # hide . and ..

compinit

# bash-completion (additional tool completions)
autoload -Uz bashcompinit && bashcompinit
[[ -r "/opt/homebrew/etc/profile.d/bash_completion.sh" ]] && source "/opt/homebrew/etc/profile.d/bash_completion.sh"

# direnv
command -v direnv &> /dev/null && eval "$(direnv hook zsh)"

# zoxide
command -v zoxide &> /dev/null && eval "$(zoxide init zsh)"

# fzf
command -v fzf &> /dev/null && eval "$(fzf --zsh)"

# Autosuggestions (history-based inline suggestions, â†’ to accept)
source /opt/homebrew/share/zsh-autosuggestions/zsh-autosuggestions.zsh

# Starship prompt
command -v starship &> /dev/null && eval "$(starship init zsh)"

# zapmarks
if [[ -f "$HOME/.oh-my-zsh/custom/plugins/zapmarks/zapmarks.plugin.zsh" ]]; then
  source "$HOME/.oh-my-zsh/custom/plugins/zapmarks/zapmarks.plugin.zsh"
  bindkey '^Z' zapmarks
fi
